(()=>{var e={};e.id=329,e.ids=[329],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2067:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(906),a(9668),a(5866);var t=a(3191),s=a(8716),l=a(7922),n=a.n(l),i=a(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(r,d);let o=["",{children:["people",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,906)),"/home/runner/work/task-tracking/task-tracking/client/src/app/people/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9668)),"/home/runner/work/task-tracking/task-tracking/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/work/task-tracking/task-tracking/client/src/app/people/page.tsx"],m="/people/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/people/page",pathname:"/people",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6649:(e,r,a)=>{Promise.resolve().then(a.bind(a,1216))},1216:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>A});var t=a(326),s=a(7577),l=a(948),n=a(1135),i=a(1009),d=a(5290),o=a(4061),c=a(3855),m=a(8307),x=a(6557);let p=(0,x.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),g=(0,x.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var h=a(8091);let y=(0,x.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),u=(0,x.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),b=(0,x.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var j=a(6024),k=a(3510),f=a(4128),v=a(9635);let N=(0,x.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),w=(0,x.Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var C=a(5738);function P({person:e,projects:r=[],projectId:a,onSubmit:l,onCancel:d,isLoading:o=!1}){let[c,m]=(0,s.useState)({name:e?.name||"",email:e?.email||"",company:e?.company||"",designation:e?.designation||"",project_id:e?.project_id?.toString()||a?.toString()||""}),[x,p]=(0,s.useState)({}),g=()=>{let e={};return c.name.trim()?c.name.length>100&&(e.name="Name must be less than 100 characters"):e.name="Name is required",c.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)&&(e.email="Please enter a valid email address"),c.company&&c.company.length>100&&(e.company="Company name must be less than 100 characters"),c.designation&&c.designation.length>100&&(e.designation="Designation must be less than 100 characters"),p(e),0===Object.keys(e).length},h=async e=>{if(e.preventDefault(),g())try{let e={name:c.name.trim(),email:c.email.trim()||void 0,company:c.company.trim()||void 0,designation:c.designation.trim()||void 0,project_id:c.project_id?parseInt(c.project_id,10):void 0};await l(e)}catch{}},b=e=>{let{name:r,value:a}=e.target;m(e=>({...e,[r]:a})),x[r]&&p(e=>({...e,[r]:void 0}))};return(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(v.Z,{className:"w-4 h-4 inline-block mr-1"}),"Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:b,placeholder:"Enter person's name",className:(0,i.m6)((0,n.W)("w-full px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",x.name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")),disabled:o,autoFocus:!0}),x.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:x.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(y,{className:"w-4 h-4 inline-block mr-1"}),"Email"]}),t.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:b,placeholder:"Enter email address (optional)",className:(0,i.m6)((0,n.W)("w-full px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",x.email?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")),disabled:o}),x.email&&t.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:x.email})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(u,{className:"w-4 h-4 inline-block mr-1"}),"Company"]}),t.jsx("input",{type:"text",id:"company",name:"company",value:c.company,onChange:b,placeholder:"Company name (optional)",className:(0,i.m6)((0,n.W)("w-full px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",x.company?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")),disabled:o}),x.company&&t.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:x.company})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"designation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(N,{className:"w-4 h-4 inline-block mr-1"}),"Designation"]}),t.jsx("input",{type:"text",id:"designation",name:"designation",value:c.designation,onChange:b,placeholder:"Job title (optional)",className:(0,i.m6)((0,n.W)("w-full px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",x.designation?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600")),disabled:o}),x.designation&&t.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:x.designation})]})]}),r.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"project_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(w,{className:"w-4 h-4 inline-block mr-1"}),"Project Assignment"]}),(0,t.jsxs)("select",{id:"project_id",name:"project_id",value:c.project_id,onChange:b,className:(0,i.m6)((0,n.W)("w-full px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","border-gray-300 dark:border-gray-600")),disabled:o,children:[t.jsx("option",{value:"",children:"Global (All Projects)"}),r.map(e=>t.jsx("option",{value:e.id.toString(),children:e.name},e.id))]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select a project to make this person available only for that project, or leave as Global."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:t.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-semibold text-sm",children:c.name?c.name.charAt(0).toUpperCase():"?"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:c.name||"Person Name"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:c.designation?c.company?`${c.designation} at ${c.company}`:c.designation:c.company||"No details"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx(C.z,{type:"button",variant:"secondary",onClick:d,disabled:o,children:"Cancel"}),t.jsx(C.z,{type:"submit",variant:"primary",isLoading:o,leftIcon:o?void 0:t.jsx(v.Z,{className:"w-4 h-4"}),children:e?"Update Person":"Add Person"})]})]})}function _(){let{people:e,loading:r,error:a,createPerson:l,updatePerson:x,deletePerson:p}=(0,j.u$)(),{projects:g}=(0,k.Z0)(),[h,y]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[v,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)(null),[A,S]=(0,s.useState)(null),[Z,z]=(0,s.useState)(!1),F=(0,s.useMemo)(()=>{let r=[...e];if(h){let e=h.toLowerCase();r=r.filter(r=>r.name.toLowerCase().includes(e)||r.email?.toLowerCase().includes(e)||r.company?.toLowerCase().includes(e)||r.designation?.toLowerCase().includes(e))}if("global"===u)r=r.filter(e=>!e.project_id);else if(u){let e=parseInt(u,10);r=r.filter(r=>r.project_id===e)}return r.sort((e,r)=>e.name.localeCompare(r.name)),r},[e,h,u]),L=(0,s.useCallback)(e=>{if(!e)return"Global";let r=g.find(r=>r.id===e);return r?.name||"Unknown Project"},[g]),E=(0,s.useCallback)(e=>{if(!e)return"#6b7280";let r=g.find(r=>r.id===e);return r?.color||"#6b7280"},[g]),G=async e=>{z(!0);try{await l(e),N(!1)}catch(e){console.error("Failed to create person:",e)}finally{z(!1)}},q=async e=>{if(w){z(!0);try{await x(w.id,e),_(null)}catch(e){console.error("Failed to update person:",e)}finally{z(!1)}}},D=async()=>{if(A){z(!0);try{await p(A.id),S(null)}catch(e){console.error("Failed to delete person:",e)}finally{z(!1)}}};return r?t.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(d.Z,{className:"w-8 h-8 text-primary-500 animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading people..."})]})}):a?t.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center max-w-md p-6 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading people"}),t.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:a})]})}):(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:t.jsx(o.Z,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"People"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.length," ",1===e.length?"person":"people"," total"]})]})]}),t.jsx(C.z,{variant:"primary",size:"sm",leftIcon:t.jsx(c.Z,{className:"w-4 h-4"}),onClick:()=>N(!0),children:"Add Person"})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[t.jsx(m.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search people...",value:h,onChange:e=>y(e.target.value),className:(0,i.m6)((0,n.W)("w-full pl-10 pr-4 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","border-gray-300 dark:border-gray-600"))})]}),(0,t.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:(0,i.m6)((0,n.W)("px-3 py-2 rounded-md border shadow-sm","bg-white dark:bg-gray-900","text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","border-gray-300 dark:border-gray-600")),children:[t.jsx("option",{value:"",children:"All People"}),t.jsx("option",{value:"global",children:"Global (All Projects)"}),g.map(e=>t.jsx("option",{value:e.id.toString(),children:e.name},e.id))]})]})]}),t.jsx("div",{className:"flex-1 overflow-auto p-4",children:0===F.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:t.jsx(o.Z,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:0===e.length?"No people yet":"No people match your search"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-sm",children:0===e.length?"Add people to your team to start assigning them to tasks.":"Try adjusting your search or filter criteria."}),0===e.length&&t.jsx(C.z,{variant:"primary",size:"sm",className:"mt-4",leftIcon:t.jsx(c.Z,{className:"w-4 h-4"}),onClick:()=>N(!0),children:"Add First Person"})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:F.map(e=>t.jsx(M,{person:e,projectName:L(e.project_id),projectColor:E(e.project_id),onEdit:()=>_(e),onDelete:()=>S(e)},e.id))})}),t.jsx(f.u_,{isOpen:v,onClose:()=>N(!1),title:"Add Person",size:"md",children:t.jsx(P,{projects:g,onSubmit:G,onCancel:()=>N(!1),isLoading:Z})}),t.jsx(f.u_,{isOpen:null!==w,onClose:()=>_(null),title:"Edit Person",size:"md",children:w&&t.jsx(P,{person:w,projects:g,onSubmit:q,onCancel:()=>_(null),isLoading:Z})}),t.jsx(f.sm,{isOpen:null!==A,onClose:()=>S(null),onConfirm:D,title:"Delete Person",message:`Are you sure you want to delete "${A?.name}"? This will remove them from all assigned tasks. This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:Z})]})}function M({person:e,projectName:r,projectColor:a,onEdit:l,onDelete:n}){let[i,d]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-primary-600 dark:text-primary-400 font-semibold text-lg",children:e.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.name}),e.designation&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.designation})]})]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("button",{onClick:()=>d(!i),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Person actions",children:t.jsx(p,{className:"w-4 h-4"})}),i&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-36 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-20",children:[(0,t.jsxs)("button",{onClick:()=>{d(!1),l()},className:"w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>{d(!1),n()},className:"w-full px-3 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[t.jsx(h.Z,{className:"w-4 h-4"}),"Delete"]})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(y,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("a",{href:`mailto:${e.email}`,className:"hover:text-primary-600 dark:hover:text-primary-400 truncate",children:e.email})]}),e.company&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx(u,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:e.company})]}),t.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:e.project_id?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:a}}),t.jsx("span",{className:"truncate",children:r})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(b,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:"Global (All Projects)"})]})})]})]})}function A(){return t.jsx(l.A,{children:t.jsx(_,{})})}},906:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`/home/runner/work/task-tracking/task-tracking/client/src/app/people/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[806,352,408,948],()=>a(2067));module.exports=t})();