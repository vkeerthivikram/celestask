(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{28610:function(e,r,t){Promise.resolve().then(t.bind(t,23726))},23726:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return rg}});var a=t(57437),s=t(2265),l=t(99376),i=t(58748),n=t(10795),d=t(61994),o=t(53335),c=t(50588),x=t(45553),g=t(93662),u=t(6481),m=t(59892),y=t(35278),h=t(13781),b=t(31047),p=t(95805),f=t(36410),k=t(55867);let j={low:"bg-gray-400",medium:"bg-blue-500",high:"bg-amber-500",urgent:"bg-red-500"};var v=e=>{var r,t,s;let{task:l,onClick:i}=e,{attributes:n,listeners:c,setNodeRef:x,transform:u,transition:v,isDragging:w}=(0,g.nB)({id:l.id,data:{type:"task",task:l}}),N={transform:m.ux.Transform.toString(u),transition:v},C=l.due_date&&new Date(l.due_date)<new Date,_=l.assignee,D=(null===(r=l.coAssignees)||void 0===r?void 0:r.length)||0,S=(_?1:0)+D,Z=(null===(t=l.tags)||void 0===t?void 0:t.slice(0,3))||[],T=((null===(s=l.tags)||void 0===s?void 0:s.length)||0)-Z.length,E=void 0!==l.progress_percent&&l.progress_percent>0,W=void 0!==l.parent_task_id&&null!==l.parent_task_id;return(0,a.jsxs)("div",{ref:x,style:N,...n,...c,onClick:()=>{null==i||i(l)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==i||i(l))},tabIndex:0,role:"button","aria-label":"Task: ".concat(l.title),className:(0,o.m6)((0,d.W)("group relative bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700","min-h-[80px] p-3 cursor-pointer select-none","transition-all duration-200 ease-in-out","hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900","hover:-translate-y-0.5",w&&["opacity-50 scale-[1.02] rotate-[2deg]","shadow-xl border-primary-400 dark:border-primary-500"])),children:[(0,a.jsx)("div",{className:(0,d.W)("absolute left-0 top-0 bottom-0 w-1 rounded-l-lg",j[l.priority]),"aria-hidden":"true"}),(0,a.jsxs)("div",{className:"pl-2",children:[W&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-1 text-xs text-gray-400 dark:text-gray-500",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3","aria-hidden":"true"}),(0,a.jsx)("span",{children:"Subtask"})]}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2 line-clamp-2",children:l.title}),Z.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[Z.map(e=>e.tag&&(0,a.jsx)(f.eR,{tag:e.tag,size:"sm",className:"text-[10px]"},e.id)),T>0&&(0,a.jsxs)("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:["+",T]})]}),E&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:[l.progress_percent,"%"]})]}),(0,a.jsx)(k.Pm,{percent:l.progress_percent})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)(f.U2,{priority:l.priority,size:"sm"}),l.due_date&&(0,a.jsxs)("span",{className:(0,d.W)("inline-flex items-center gap-1 text-xs",C?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:[(0,a.jsx)(b.Z,{className:"w-3 h-3","aria-hidden":"true"}),(e=>{try{return(0,y.Z)(new Date(e),"MMM d")}catch(r){return e}})(l.due_date)]}),S>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[_&&(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",title:_.name,children:(0,a.jsx)("span",{className:"text-primary-600 dark:text-primary-400 text-[10px] font-medium",children:_.name.charAt(0).toUpperCase()})}),D>0&&(0,a.jsxs)("div",{className:"flex items-center gap-0.5 text-xs text-gray-500 dark:text-gray-400",title:"".concat(D," co-assignee").concat(D>1?"s":""),children:[(0,a.jsx)(p.Z,{className:"w-3 h-3","aria-hidden":"true"}),(0,a.jsx)("span",{children:D})]})]})]})]})]})},w=e=>{let{id:r,title:t,tasks:s,projectColor:l,onTaskClick:i}=e,{setNodeRef:c,isOver:x}=(0,n.Zj)({id:r,data:{type:"column",status:r}}),m=u.RS[r],y=s.map(e=>e.id);return(0,a.jsxs)("div",{className:(0,o.m6)((0,d.W)("flex flex-col min-w-[280px] max-w-[400px] rounded-xl","bg-gray-50 dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700","transition-colors duration-200",x&&"bg-primary-50 dark:bg-primary-900/20 border-primary-300 dark:border-primary-700")),style:l?{"--column-color":l}:{},role:"region","aria-label":"".concat(t," column with ").concat(s.length," tasks"),children:[(0,a.jsx)("div",{className:(0,d.W)("sticky top-0 z-10 px-4 py-3 rounded-t-xl","bg-gray-50/95 dark:bg-gray-800/95 backdrop-blur-sm","border-b border-gray-200 dark:border-gray-700"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:m.color},"aria-hidden":"true"}),(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t})]}),(0,a.jsx)("span",{className:(0,d.W)("inline-flex items-center justify-center","min-w-[24px] h-6 px-2","text-xs font-medium rounded-full","bg-gray-200 dark:bg-gray-700","text-gray-700 dark:text-gray-300"),children:s.length})]})}),(0,a.jsxs)("div",{ref:c,className:(0,d.W)("flex-1 p-2 min-h-[200px]","overflow-y-auto","scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600","scrollbar-track-transparent"),children:[(0,a.jsx)(g.Fo,{items:y,strategy:g.qw,children:(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsx)(v,{task:e,onClick:i},e.id))})}),0===s.length&&(0,a.jsxs)("div",{className:(0,d.W)("flex flex-col items-center justify-center py-8 px-4","text-gray-400 dark:text-gray-500"),children:[(0,a.jsx)("p",{className:"text-sm",children:"No tasks"}),(0,a.jsx)("p",{className:"text-xs mt-1 opacity-75",children:"Drag tasks here to add them"})]})]})]})};let N=[{id:"backlog",title:"Backlog",color:"#6b7280"},{id:"todo",title:"To Do",color:"#3b82f6"},{id:"in_progress",title:"In Progress",color:"#f59e0b"},{id:"review",title:"Review",color:"#8b5cf6"},{id:"done",title:"Done",color:"#10b981"}],C=()=>{let{filteredTasks:e,updateTaskStatus:r}=(0,c.Xi)(),{openTaskModal:t}=(0,x.qD)(),[l,i]=(0,s.useState)(null),[g,u]=(0,s.useState)(null),m=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:8}}),(0,n.VT)(n.Lg)),y=(0,s.useMemo)(()=>{let r={backlog:[],todo:[],in_progress:[],review:[],done:[]};return e.forEach(e=>{r[e.status].push(e)}),r},[e]),h=async t=>{let{active:a,over:s}=t;if(i(null),u(null),!s)return;let l=a.id,n=null,d=N.find(e=>e.id===s.id);if(d)n=d.id;else{let r=e.find(e=>e.id===s.id);r&&(n=r.status)}let o=e.find(e=>e.id===l);if(n&&o&&o.status!==n)try{await r(l,n)}catch(e){console.error("Failed to update task status:",e)}},b=e=>{t(e)};return(0,a.jsx)("div",{className:"h-full w-full overflow-hidden",children:(0,a.jsxs)(n.LB,{sensors:m,collisionDetection:n.ey,onDragStart:r=>{let{active:t}=r,a=e.find(e=>e.id===t.id);a&&i(a)},onDragOver:r=>{let{over:t}=r;if(t){let r=t.id;if(N.some(e=>e.id===r))u(r);else{let r=e.find(e=>e.id===t.id);r&&u(r.status)}}else u(null)},onDragEnd:h,children:[(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("flex gap-4 h-full p-4","overflow-x-auto overflow-y-hidden","scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600","scrollbar-track-transparent")),role:"grid","aria-label":"Kanban board",children:N.map(e=>(0,a.jsx)(w,{id:e.id,title:e.title,tasks:y[e.id],projectColor:e.color,onTaskClick:b},e.id))}),(0,a.jsx)(n.y9,{children:l?(0,a.jsx)("div",{className:"rotate-[3deg] shadow-2xl",children:(0,a.jsx)(v,{task:l,onClick:()=>{}})}):null})]})})};var _=t(15863),D=t(99801),S=t(30401),Z=t(90740),T=t(40875),E=t(73247),W=t(32489),M=t(92369),F=t(62720),O=t(61178),z=t(37710),P=t(14565),L=t(51776);function A(e){let{isOpen:r,onClose:t,onSave:l,currentFilters:i,currentSortBy:n,currentSortOrder:d,viewType:o,projectId:c,existingView:x,loading:g=!1}=e,[u,m]=(0,s.useState)(""),[y,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)(null),f=!!x;(0,s.useEffect)(()=>{r&&(x?(m(x.name),h(x.is_default)):(m(""),h(!1)),p(null))},[r,x]);let k=async e=>{if(e.preventDefault(),p(null),!u.trim()){p("View name is required");return}try{let e={name:u.trim(),view_type:o,project_id:c||null,filters:i,sort_by:n,sort_order:d,is_default:y};await l(e),t()}catch(e){p(e instanceof Error?e.message:"Failed to save view")}},j=Object.entries(i).filter(e=>{let[r,t]=e;return null!=t&&""!==t&&(!Array.isArray(t)||t.length>0)}).length;return(0,a.jsx)(L.ZP,{isOpen:r,onClose:t,title:f?"Update Saved View":"Save Current View",size:"sm",children:(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"view-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["View Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"view-name",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white ".concat(b&&!u.trim()?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"e.g., High Priority Tasks, Due This Week",autoFocus:!0}),b&&!u.trim()&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:b})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"View Type"}),(0,a.jsx)("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md text-sm capitalize",children:o})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filters Applied"}),(0,a.jsx)("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md text-sm",children:0===j?(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"No filters applied"}):(0,a.jsxs)("span",{children:[j," filter",1!==j?"s":""," active"]})}),j>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[i.status&&i.status.length>0&&(0,a.jsx)(R,{label:"Status: ".concat(i.status.join(", "))}),i.priority&&i.priority.length>0&&(0,a.jsx)(R,{label:"Priority: ".concat(i.priority.join(", "))}),i.assignee_id&&(0,a.jsx)(R,{label:"Assignee set"}),i.tag_id&&(0,a.jsx)(R,{label:"Tag set"}),i.due_date_from&&(0,a.jsx)(R,{label:"From: ".concat(i.due_date_from)}),i.due_date_to&&(0,a.jsx)(R,{label:"To: ".concat(i.due_date_to)}),i.search&&(0,a.jsx)(R,{label:'Search: "'.concat(i.search,'"')})]})]}),(n||d)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sort"}),(0,a.jsx)("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md text-sm",children:n?(0,a.jsxs)("span",{className:"capitalize",children:[n.replace(/_/g," ")," (",d,"ending)"]}):(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Default sort"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"set-default",checked:y,onChange:e=>h(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsxs)("label",{htmlFor:"set-default",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Set as default view for this ",c?"project":"view type"]})]}),b&&"View name is required"!==b&&(0,a.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:b})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[(0,a.jsx)(P.Z,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),(0,a.jsx)(P.Z,{type:"submit",variant:"primary",loading:g,children:f?"Update View":"Save View"})]})]})})}function R(e){let{label:r}=e;return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 text-xs rounded-md",children:r})}function B(e){let{views:r,currentViewId:t,onSelect:l,onDelete:i,onSetDefault:n,loading:d=!1}=e,[o,c]=(0,s.useState)(!1),x=(0,s.useRef)(null);return((0,s.useEffect)(()=>{function e(e){x.current&&!x.current.contains(e.target)&&c(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),0===r.length)?null:(0,a.jsxs)("div",{ref:x,className:"relative",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>c(!o),disabled:d,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50","aria-haspopup":"listbox","aria-expanded":o,children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Saved Views",(0,a.jsx)("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 py-0.5 px-1.5 rounded text-xs",children:r.length}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(o?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&(0,a.jsx)("div",{className:"absolute z-20 mt-1 w-64 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg",role:"listbox",children:(0,a.jsx)("ul",{className:"py-1 max-h-60 overflow-auto",children:r.map(e=>(0,a.jsx)(K,{view:e,isActive:e.id===t,onSelect:()=>{l(e),c(!1)},onDelete:()=>{i(e)},onSetDefault:()=>{n(e)}},e.id))})})]})}function K(e){let{view:r,isActive:t,onSelect:l,onDelete:i,onSetDefault:n}=e,[d,o]=(0,s.useState)(!1),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsx)("li",{className:"relative group ".concat(t?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"),role:"option","aria-selected":t,children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[(0,a.jsxs)("button",{type:"button",onClick:l,className:"flex-1 flex items-center gap-2 text-left text-sm text-gray-700 dark:text-gray-300",children:[r.is_default&&(0,a.jsx)("svg",{className:"w-4 h-4 text-yellow-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,a.jsx)("span",{className:t?"font-medium":"",children:r.name})]}),(0,a.jsxs)("div",{ref:c,className:"relative",children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),o(!d)},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"View options",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),d&&(0,a.jsxs)("div",{className:"absolute right-0 z-30 mt-1 w-40 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg py-1",children:[!r.is_default&&(0,a.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),o(!1),n()},className:"w-full text-left px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Set as Default"]}),(0,a.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),o(!1),confirm('Delete saved view "'.concat(r.name,'"?'))&&i()},className:"w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})})}function U(e){let{label:r,options:t,selected:l,onChange:i}=e,[n,c]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=e=>{l.includes(e)?i(l.filter(r=>r!==e)):i([...l,e])};return(0,a.jsxs)("div",{ref:x,className:"relative",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>c(!n),onKeyDown:e=>{"Escape"===e.key&&c(!1)},className:(0,o.m6)((0,d.W)("inline-flex items-center gap-2 px-3 py-2","text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800","text-gray-700 dark:text-gray-300","hover:bg-gray-50 dark:hover:bg-gray-700","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2","dark:focus:ring-offset-gray-900","transition-colors duration-150",l.length>0&&"ring-2 ring-primary-500")),"aria-expanded":n,"aria-haspopup":"listbox",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4","aria-hidden":"true"}),(0,a.jsx)("span",{children:r}),l.length>0&&(0,a.jsx)("span",{className:"flex items-center justify-center w-5 h-5 text-xs font-semibold rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400",children:l.length}),(0,a.jsx)(T.Z,{className:(0,d.W)("w-4 h-4 transition-transform",n&&"rotate-180"),"aria-hidden":"true"})]}),n&&(0,a.jsx)("div",{className:"absolute z-20 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 py-1",role:"listbox","aria-label":"".concat(r," options"),children:t.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>g(e.value),className:(0,o.m6)((0,d.W)("w-full flex items-center gap-3 px-4 py-2 text-sm text-left","hover:bg-gray-100 dark:hover:bg-gray-700","focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700","transition-colors duration-150")),role:"option","aria-selected":l.includes(e.value),children:[(0,a.jsx)("span",{className:(0,d.W)("w-4 h-4 rounded border flex items-center justify-center",l.includes(e.value)?"bg-primary-600 border-primary-600":"border-gray-300 dark:border-gray-500"),children:l.includes(e.value)&&(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 12 12",children:(0,a.jsx)("path",{d:"M10.28 2.28L4 8.56 1.72 6.28a.75.75 0 00-1.06 1.06l3 3a.75.75 0 001.06 0l7-7a.75.75 0 00-1.06-1.06z"})})}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color},"aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.label})]},e.value))})]})}function I(e){let{label:r,icon:t,options:l,selected:i,onChange:n,placeholder:c="All"}=e,[x,g]=(0,s.useState)(!1),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let m=l.find(e=>e.value===i);return(0,a.jsxs)("div",{ref:u,className:"relative",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>g(!x),onKeyDown:e=>{"Escape"===e.key&&g(!1)},className:(0,o.m6)((0,d.W)("inline-flex items-center gap-2 px-3 py-2","text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800","text-gray-700 dark:text-gray-300","hover:bg-gray-50 dark:hover:bg-gray-700","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2","dark:focus:ring-offset-gray-900","transition-colors duration-150",i&&"ring-2 ring-primary-500")),"aria-expanded":x,"aria-haspopup":"listbox",children:[t,(0,a.jsx)("span",{className:"max-w-[100px] truncate",children:m?m.label:c}),(0,a.jsx)(T.Z,{className:(0,d.W)("w-4 h-4 transition-transform",x&&"rotate-180"),"aria-hidden":"true"})]}),x&&(0,a.jsxs)("div",{className:"absolute z-20 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 py-1 max-h-64 overflow-y-auto",role:"listbox","aria-label":"".concat(r," options"),children:[(0,a.jsx)("button",{type:"button",onClick:()=>{n(""),g(!1)},className:(0,o.m6)((0,d.W)("w-full flex items-center gap-3 px-4 py-2 text-sm text-left","hover:bg-gray-100 dark:hover:bg-gray-700","focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700","transition-colors duration-150",!i&&"bg-primary-50 dark:bg-primary-900/20")),role:"option","aria-selected":!i,children:(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 italic",children:c})}),l.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{n(e.value),g(!1)},className:(0,o.m6)((0,d.W)("w-full flex items-center gap-3 px-4 py-2 text-sm text-left","hover:bg-gray-100 dark:hover:bg-gray-700","focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700","transition-colors duration-150",i===e.value&&"bg-primary-50 dark:bg-primary-900/20")),role:"option","aria-selected":i===e.value,children:[e.color&&(0,a.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color},"aria-hidden":"true"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-gray-700 dark:text-gray-300 truncate",children:e.label}),e.subtitle&&(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.subtitle})]}),i===e.value&&(0,a.jsx)("svg",{className:"w-4 h-4 text-primary-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 12 12",children:(0,a.jsx)("path",{d:"M10.28 2.28L4 8.56 1.72 6.28a.75.75 0 00-1.06 1.06l3 3a.75.75 0 001.06 0l7-7a.75.75 0 00-1.06-1.06z"})})]},e.value)),0===l.length&&(0,a.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400 italic",children:"No options available"})]})]})}function V(e){let{filters:r,onFilterChange:t,totalTasks:l,filteredCount:i,people:n=[],tags:c=[],projectId:x,viewType:g="list",sortBy:m,sortOrder:y="asc"}=e,[h,b]=(0,s.useState)(r.search),[p,f]=(0,s.useState)(!1),k=function(e,r){let[t,a]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let r=setTimeout(()=>{a(e)},300);return()=>{clearTimeout(r)}},[e,300]),t}(h,0),{savedViews:j,fetchSavedViews:v,createSavedView:w,deleteSavedView:N,setDefaultView:C}=(0,z.F9)();(0,s.useEffect)(()=>{v(null!=x?x:void 0,g)},[x,g,v]),(0,s.useEffect)(()=>{k!==r.search&&t({...r,search:k})},[k]);let _=(0,s.useCallback)(e=>{t({...r,status:e})},[r,t]),D=(0,s.useCallback)(e=>{t({...r,priority:e})},[r,t]),S=(0,s.useCallback)(e=>{t({...r,assignee_id:e})},[r,t]),Z=(0,s.useCallback)(e=>{t({...r,tag_id:e})},[r,t]),T=async e=>{await N(e.id)},P=async e=>{await C(e.id)},L=async e=>await w(e),R=r.search||r.status.length>0||r.priority.length>0||r.assignee_id||r.tag_id,K=(r.search?1:0)+r.status.length+r.priority.length+(r.assignee_id?1:0)+(r.tag_id?1:0),V=Object.entries(u.RS).map(e=>{let[r,t]=e;return{value:r,label:t.label,color:t.color}}),H=Object.entries(u.Fr).map(e=>{let[r,t]=e;return{value:r,label:t.label,color:t.color}}),q=n.map(e=>({value:String(e.id),label:e.name,color:"#3B82F6",subtitle:e.designation})),Y=c.map(e=>({value:String(e.id),label:e.name,color:e.color}));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(E.Z,{className:"h-4 w-4 text-gray-400 dark:text-gray-500","aria-hidden":"true"})}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>{b(e.target.value)},placeholder:"Search tasks by title or description...",className:(0,o.m6)((0,d.W)("w-full pl-10 pr-4 py-2 rounded-md","border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800","text-gray-900 dark:text-gray-100","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","transition-colors duration-150")),"aria-label":"Search tasks"}),h&&(0,a.jsx)("button",{type:"button",onClick:()=>b(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Clear search",children:(0,a.jsx)(W.Z,{className:"h-4 w-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap sm:flex-nowrap",children:[j.length>0&&(0,a.jsx)(B,{views:j,onSelect:e=>{var r;let a={search:(r=e.filters).search||"",status:r.status?[r.status]:[],priority:r.priority?[r.priority]:[],assignee_id:r.assignee_id?String(r.assignee_id):"",tag_id:r.tag_id?String(r.tag_id):""};b(a.search),t(a)},onDelete:T,onSetDefault:P}),(0,a.jsx)(U,{label:"Status",options:V,selected:r.status,onChange:_}),(0,a.jsx)(U,{label:"Priority",options:H,selected:r.priority,onChange:D}),(0,a.jsx)(I,{label:"Assignee",icon:(0,a.jsx)(M.Z,{className:"w-4 h-4","aria-hidden":"true"}),options:q,selected:r.assignee_id,onChange:S,placeholder:"Anyone"}),(0,a.jsx)(I,{label:"Tag",icon:(0,a.jsx)(F.Z,{className:"w-4 h-4","aria-hidden":"true"}),options:Y,selected:r.tag_id,onChange:Z,placeholder:"Any tag"}),R&&(0,a.jsxs)("button",{type:"button",onClick:()=>f(!0),className:(0,o.m6)((0,d.W)("inline-flex items-center gap-1.5 px-3 py-2","text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-800","text-gray-600 dark:text-gray-400","hover:bg-gray-50 dark:hover:bg-gray-700","hover:text-gray-900 dark:hover:text-gray-200","transition-colors duration-150")),"aria-label":"Save current view",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4","aria-hidden":"true"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Save View"})]}),R&&(0,a.jsxs)("button",{type:"button",onClick:()=>{b(""),t({search:"",status:[],priority:[],assignee_id:"",tag_id:""})},className:(0,o.m6)((0,d.W)("inline-flex items-center gap-1.5 px-3 py-2","text-sm font-medium rounded-md","text-gray-600 dark:text-gray-400","hover:text-gray-900 dark:hover:text-gray-200","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors duration-150")),"aria-label":"Clear all filters",children:[(0,a.jsx)(W.Z,{className:"w-4 h-4","aria-hidden":"true"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Clear"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("p",{children:["Showing ",(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:i})," ","of ",(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l})," tasks"]}),R&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400",children:[K," filter",1!==K?"s":""," active"]})})]}),p&&(0,a.jsx)(A,{isOpen:p,onClose:()=>f(!1),onSave:L,currentFilters:{search:r.search||void 0,status:r.status.length>0?r.status[0]:void 0,priority:r.priority.length>0?r.priority[0]:void 0,assignee_id:r.assignee_id?Number(r.assignee_id):void 0,tag_id:r.tag_id?Number(r.tag_id):void 0},currentSortBy:m,currentSortOrder:y,viewType:g,projectId:x})]})}var H=t(22252),q=t(45675),Y=t(18930);let X=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"review",label:"Review"},{value:"done",label:"Done"}],G=[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}];function $(e){var r,t,l;let{task:i,onEdit:n,onDelete:x,isOverdue:g,isSelected:u=!1,onToggleSelection:m}=e,[y,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),[N,C]=(0,s.useState)(""),[D,Z]=(0,s.useState)(!1),[T,E]=(0,s.useState)(!1),[W,M]=(0,s.useState)(!1),{updateTaskStatus:F,updateTask:O,updateTaskProgress:z}=(0,c.Xi)(),L=(0,s.useRef)(null),A=(0,s.useRef)(null),R=(0,s.useRef)(null),B=(0,s.useRef)(null);(0,s.useEffect)(()=>{"title"===v&&L.current&&(L.current.focus(),L.current.select())},[v]),(0,s.useEffect)(()=>{function e(e){R.current&&!R.current.contains(e.target)&&(E(!1),w(null)),B.current&&!B.current.contains(e.target)&&(M(!1),w(null))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let K=async e=>{E(!1),w(null),Z(!0);try{await F(i.id,e)}catch(e){console.error("Failed to update status:",e)}finally{Z(!1)}},U=async e=>{M(!1),w(null),Z(!0);try{await O(i.id,{priority:e})}catch(e){console.error("Failed to update priority:",e)}finally{Z(!1)}},I=async()=>{let e=Math.min(100,Math.max(0,Number(N)||0));if(w(null),e!==i.progress_percent){Z(!0);try{await z(i.id,{progress_percent:e})}catch(e){console.error("Failed to update progress:",e)}finally{Z(!1)}}},V=async()=>{let e=String(N).trim();if(w(null),e&&e!==i.title){Z(!0);try{await O(i.id,{title:e})}catch(e){console.error("Failed to update title:",e)}finally{Z(!1)}}},$=i.assignee,Q=(null===(r=i.coAssignees)||void 0===r?void 0:r.length)||0,J=(null===(t=i.tags)||void 0===t?void 0:t.slice(0,2))||[],ee=((null===(l=i.tags)||void 0===l?void 0:l.length)||0)-J.length,er=void 0!==i.progress_percent&&i.progress_percent>0,et=void 0!==i.parent_task_id&&null!==i.parent_task_id;return(0,a.jsxs)("tr",{className:(0,o.m6)((0,d.W)("group cursor-pointer","border-b border-gray-200 dark:border-gray-700","hover:bg-blue-50 dark:hover:bg-blue-900/10","transition-colors duration-150",g&&"bg-red-50 dark:bg-red-900/10 hover:bg-red-100 dark:hover:bg-red-900/20",u&&"bg-blue-100 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30")),onClick:()=>{v||n(i)},onKeyDown:e=>{v||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n(i))},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),tabIndex:0,role:"row","aria-label":"Task: ".concat(i.title),"aria-selected":u,children:[(0,a.jsx)("td",{className:"px-2 py-3 w-10",children:(0,a.jsx)("div",{className:(0,d.W)("w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer transition-colors",u?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-gray-600 hover:border-blue-400"),onClick:e=>{e.stopPropagation(),null==m||m(i.id)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),null==m||m(i.id))},tabIndex:0,role:"checkbox","aria-checked":u,"aria-label":"Select ".concat(i.title),children:u&&(0,a.jsx)(S.Z,{className:"w-3 h-3 text-white","aria-hidden":"true"})})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"flex items-start gap-3",children:(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[et&&(0,a.jsx)(h.Z,{className:"w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0","aria-hidden":"true"}),"title"===v?(0,a.jsx)("input",{ref:L,type:"text",value:N,onChange:e=>C(e.target.value),onBlur:V,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),V()):"Escape"===e.key&&(w(null),C(""))},onClick:e=>e.stopPropagation(),className:"w-full px-2 py-1 text-sm border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,a.jsx)("p",{className:(0,o.m6)((0,d.W)("text-sm font-medium text-gray-900 dark:text-gray-100","truncate","done"===i.status&&"line-through text-gray-500 dark:text-gray-400","hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded px-1 -mx-1 cursor-text")),onDoubleClick:e=>{e.stopPropagation(),w("title"),C(i.title)},title:"Double-click to edit",children:i.title}),D&&"title"===v&&(0,a.jsx)(_.Z,{className:"w-3 h-3 animate-spin text-blue-500","aria-hidden":"true"})]}),i.description&&(0,a.jsx)("p",{className:"mt-0.5 text-xs text-gray-500 dark:text-gray-400 truncate max-w-md",children:i.description})]})})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"relative",ref:R,children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),w("status"),E(!0),M(!1)},disabled:D,className:(0,d.W)("rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Change status",children:(0,a.jsx)(f.OE,{status:i.status,size:"sm"})}),T&&(0,a.jsx)("div",{className:"absolute z-20 top-full left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1",children:X.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>K(e.value),className:(0,d.W)("w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700","flex items-center gap-2",i.status===e.value&&"bg-blue-50 dark:bg-blue-900/30"),children:[(0,a.jsx)(f.OE,{status:e.value,size:"sm"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.label})]},e.value))}),D&&"status"===v&&(0,a.jsx)(_.Z,{className:"absolute -right-5 top-1/2 -translate-y-1/2 w-3 h-3 animate-spin text-blue-500","aria-hidden":"true"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"relative",ref:B,children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),w("priority"),M(!0),E(!1)},disabled:D,className:(0,d.W)("rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Change priority",children:(0,a.jsx)(f.U2,{priority:i.priority,size:"sm"})}),W&&(0,a.jsx)("div",{className:"absolute z-20 top-full left-0 mt-1 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1",children:G.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>U(e.value),className:(0,d.W)("w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700","flex items-center gap-2",i.priority===e.value&&"bg-blue-50 dark:bg-blue-900/30"),children:[(0,a.jsx)(f.U2,{priority:e.value,size:"sm"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.label})]},e.value))}),D&&"priority"===v&&(0,a.jsx)(_.Z,{className:"absolute -right-5 top-1/2 -translate-y-1/2 w-3 h-3 animate-spin text-blue-500","aria-hidden":"true"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"relative",children:["progress"===v?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{ref:A,type:"number",min:"0",max:"100",value:N,onChange:e=>C(e.target.value),onBlur:I,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),I()):"Escape"===e.key&&(w(null),C(""))},onClick:e=>e.stopPropagation(),className:"w-16 px-2 py-1 text-sm border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"%"})]}):(0,a.jsx)("button",{type:"button",onClick:e=>{var r;e.stopPropagation(),w("progress"),C(null!==(r=i.progress_percent)&&void 0!==r?r:0)},disabled:D,className:(0,d.W)("min-w-[80px] rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left","focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-label":"Change progress",children:er?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Pm,{percent:i.progress_percent}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 tabular-nums",children:[i.progress_percent,"%"]})]}):(0,a.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400",children:"Set progress"})}),D&&"progress"===v&&(0,a.jsx)(_.Z,{className:"absolute -right-5 top-1/2 -translate-y-1/2 w-3 h-3 animate-spin text-blue-500","aria-hidden":"true"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0",title:$.name,children:(0,a.jsx)("span",{className:"text-primary-600 dark:text-primary-400 text-xs font-medium",children:$.name.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate max-w-[100px]",children:$.name}),Q>0&&(0,a.jsxs)("div",{className:"flex items-center gap-0.5 text-xs text-gray-500 dark:text-gray-400",title:"".concat(Q," co-assignee").concat(Q>1?"s":""),children:[(0,a.jsx)(p.Z,{className:"w-3 h-3","aria-hidden":"true"}),(0,a.jsxs)("span",{children:["+",Q]})]})]}):(0,a.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Unassigned"})})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:J.length>0?(0,a.jsxs)(a.Fragment,{children:[J.map(e=>e.tag&&(0,a.jsx)(f.eR,{tag:e.tag,size:"sm",className:"text-[10px]"},e.id)),ee>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",ee]})]}):(0,a.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"-"})})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g&&(0,a.jsx)(H.Z,{className:"w-4 h-4 text-red-500 dark:text-red-400 flex-shrink-0","aria-hidden":"true"}),i.due_date&&(0,a.jsx)(b.Z,{className:(0,d.W)("w-4 h-4 flex-shrink-0",g?"text-red-400 dark:text-red-500":"text-gray-400 dark:text-gray-500"),"aria-hidden":"true"}),(0,a.jsx)("span",{className:(0,o.m6)((0,d.W)("text-sm",g?"text-red-600 dark:text-red-400 font-medium":"text-gray-600 dark:text-gray-400")),children:(e=>{if(!e)return"-";let r=new Date(e),t=new Date,a=Math.ceil((r.getTime()-t.getTime())/864e5);return 0===a?"Today":1===a?"Tomorrow":-1===a?"Yesterday":r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:r.getFullYear()!==t.getFullYear()?"numeric":void 0})})(i.due_date)})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:(0,d.W)("flex items-center gap-1 transition-opacity duration-150",y?"opacity-100":"opacity-0 sm:opacity-0"),children:[(0,a.jsx)(P.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),n(i)},className:"p-1.5","aria-label":"Edit ".concat(i.title),children:(0,a.jsx)(q.Z,{className:"w-4 h-4","aria-hidden":"true"})}),(0,a.jsx)(P.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),x(i)},className:"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20","aria-label":"Delete ".concat(i.title),children:(0,a.jsx)(Y.Z,{className:"w-4 h-4","aria-hidden":"true"})})]})})]})}var Q=t(10407);function J(e){let{task:r,onEdit:t,onDelete:s,isOverdue:l}=e,i=e=>{if(!e)return"-";let r=new Date(e),t=new Date,a=Math.ceil((r.getTime()-t.getTime())/864e5);return 0===a?"Today":1===a?"Tomorrow":-1===a?"Yesterday":r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:r.getFullYear()!==t.getFullYear()?"numeric":void 0})};return(0,a.jsxs)("article",{className:(0,o.m6)((0,d.W)("relative flex flex-col p-4 rounded-lg","bg-white dark:bg-gray-800","border border-gray-200 dark:border-gray-700","hover:border-primary-300 dark:hover:border-primary-600","hover:shadow-sm","cursor-pointer","transition-all duration-150",l&&"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-900/10")),onClick:()=>{t(r)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),t(r))},tabIndex:0,role:"button","aria-label":"Task: ".concat(r.title,". Status: ").concat(r.status,". Priority: ").concat(r.priority,". Due: ").concat(i(r.due_date)),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:(0,o.m6)((0,d.W)("text-sm font-semibold text-gray-900 dark:text-gray-100","line-clamp-2","done"===r.status&&"line-through text-gray-500 dark:text-gray-400")),children:r.title}),r.description&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:r.description})]}),(0,a.jsx)(Q.Z,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 flex-shrink-0","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsx)(f.OE,{status:r.status,size:"sm"}),(0,a.jsx)(f.U2,{priority:r.priority,size:"sm"}),r.due_date&&(0,a.jsxs)("div",{className:(0,d.W)("flex items-center gap-1 text-xs",l?"text-red-600 dark:text-red-400 font-medium":"text-gray-500 dark:text-gray-400"),children:[l?(0,a.jsx)(H.Z,{className:"w-3.5 h-3.5","aria-hidden":"true"}):(0,a.jsx)(b.Z,{className:"w-3.5 h-3.5","aria-hidden":"true"}),(0,a.jsx)("span",{children:i(r.due_date)})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-end gap-2",children:[(0,a.jsxs)(P.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),t(r)},className:"text-xs px-3 py-1.5","aria-label":"Edit ".concat(r.title),children:[(0,a.jsx)(q.Z,{className:"w-3.5 h-3.5 mr-1.5","aria-hidden":"true"}),"Edit"]}),(0,a.jsxs)(P.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s(r)},className:"text-xs px-3 py-1.5 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20","aria-label":"Delete ".concat(r.title),children:[(0,a.jsx)(Y.Z,{className:"w-3.5 h-3.5 mr-1.5","aria-hidden":"true"}),"Delete"]})]})]})}var ee=t(28842),er=t(20265),et=t(15051);function ea(e){let{label:r,sortKey:t,currentSort:s,sortOrder:l,onSort:i,className:n}=e,c=s===t;return(0,a.jsx)("th",{className:(0,o.m6)((0,d.W)("sticky top-0 z-10","px-4 py-3 text-left text-xs font-semibold","text-gray-600 dark:text-gray-300","bg-gray-50 dark:bg-gray-800/80","border-b border-gray-200 dark:border-gray-700","cursor-pointer select-none","hover:bg-gray-100 dark:hover:bg-gray-700/50","transition-colors duration-150",n)),onClick:()=>{i(t)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i(t))},tabIndex:0,role:"columnheader","aria-sort":c?"asc"===l?"ascending":"descending":"none",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:r}),c?"asc"===l?(0,a.jsx)(er.Z,{className:"w-4 h-4 text-primary-600 dark:text-primary-400","aria-hidden":"true"}):(0,a.jsx)(et.Z,{className:"w-4 h-4 text-primary-600 dark:text-primary-400","aria-hidden":"true"}):(0,a.jsx)(ee.Z,{className:"w-4 h-4 text-gray-400 dark:text-gray-500","aria-hidden":"true"})]})})}var es=t(54586),el=t(51339),ei=t(92646);let en=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"review",label:"Review"},{value:"done",label:"Done"}],ed=[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}];function eo(e){let{selectedCount:r,onStatusChange:t,onPriorityChange:l,onAssigneeChange:i,onDelete:n,onClearSelection:c}=e,{people:x}=(0,el.u$)(),{showToast:g}=(0,ei.pm)(),[u,m]=(0,s.useState)(!1),[y,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)(!1),[k,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[N,C]=(0,s.useState)(null),D=(0,s.useRef)(null),S=(0,s.useRef)(null),Z=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){D.current&&!D.current.contains(e.target)&&m(!1),S.current&&!S.current.contains(e.target)&&h(!1),Z.current&&!Z.current.contains(e.target)&&p(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let E=async e=>{m(!1),w(!0),C("status");try{await t(e),g('Updated status to "'.concat(e,'" for ').concat(r," task").concat(1!==r?"s":""),"success")}catch(e){g("Failed to update status","error")}finally{w(!1),C(null)}},M=async e=>{h(!1),w(!0),C("priority");try{await l(e),g('Updated priority to "'.concat(e,'" for ').concat(r," task").concat(1!==r?"s":""),"success")}catch(e){g("Failed to update priority","error")}finally{w(!1),C(null)}},F=async e=>{p(!1),w(!0),C("assignee");try{var t;await i(e);let a=e?(null===(t=x.find(r=>r.id===e))||void 0===t?void 0:t.name)||"Unknown":"Unassigned";g("Assigned ".concat(r," task").concat(1!==r?"s":"",' to "').concat(a,'"'),"success")}catch(e){g("Failed to update assignee","error")}finally{w(!1),C(null)}},O=async()=>{j(!1),w(!0),C("delete");try{await n(),g("Deleted ".concat(r," task").concat(1!==r?"s":""),"success")}catch(e){g("Failed to delete tasks","error")}finally{w(!1),C(null)}};return 0===r?null:(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[r," task",1!==r?"s":""," selected"]}),(0,a.jsx)("button",{onClick:c,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline",children:"Clear selection"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",ref:D,children:[(0,a.jsx)("button",{onClick:()=>{m(!u),h(!1),p(!1)},disabled:v,className:(0,o.m6)((0,d.W)("flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200","hover:bg-gray-50 dark:hover:bg-gray-600","focus:outline-none focus:ring-2 focus:ring-blue-500","disabled:opacity-50 disabled:cursor-not-allowed")),children:"status"===N?(0,a.jsx)(_.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Status",(0,a.jsx)(T.Z,{className:"w-4 h-4"})]})}),u&&(0,a.jsx)("div",{className:"absolute bottom-full mb-1 left-0 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 max-h-64 overflow-auto",children:en.map(e=>(0,a.jsxs)("button",{onClick:()=>E(e.value),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[(0,a.jsx)(f.OE,{status:e.value,size:"sm"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"relative",ref:S,children:[(0,a.jsx)("button",{onClick:()=>{h(!y),m(!1),p(!1)},disabled:v,className:(0,o.m6)((0,d.W)("flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200","hover:bg-gray-50 dark:hover:bg-gray-600","focus:outline-none focus:ring-2 focus:ring-blue-500","disabled:opacity-50 disabled:cursor-not-allowed")),children:"priority"===N?(0,a.jsx)(_.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Priority",(0,a.jsx)(T.Z,{className:"w-4 h-4"})]})}),y&&(0,a.jsx)("div",{className:"absolute bottom-full mb-1 left-0 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 max-h-64 overflow-auto",children:ed.map(e=>(0,a.jsxs)("button",{onClick:()=>M(e.value),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[(0,a.jsx)(f.U2,{priority:e.value,size:"sm"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"relative",ref:Z,children:[(0,a.jsx)("button",{onClick:()=>{p(!b),m(!1),h(!1)},disabled:v,className:(0,o.m6)((0,d.W)("flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md border border-gray-300 dark:border-gray-600","bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200","hover:bg-gray-50 dark:hover:bg-gray-600","focus:outline-none focus:ring-2 focus:ring-blue-500","disabled:opacity-50 disabled:cursor-not-allowed")),children:"assignee"===N?(0,a.jsx)(_.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Assign",(0,a.jsx)(T.Z,{className:"w-4 h-4"})]})}),b&&(0,a.jsxs)("div",{className:"absolute bottom-full mb-1 left-0 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 max-h-64 overflow-auto",children:[(0,a.jsx)("button",{onClick:()=>F(null),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 italic",children:"Unassigned"}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),0===x.length?(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"No people available"}):x.map(e=>(0,a.jsxs)("button",{onClick:()=>F(e.id),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-primary-600 dark:text-primary-400 text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 truncate",children:e.name}),e.email&&(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.email})]})]},e.id))]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>j(!0),disabled:v,className:(0,o.m6)((0,d.W)("flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-md border","border-red-300 dark:border-red-700","bg-white dark:bg-gray-700 text-red-600 dark:text-red-400","hover:bg-red-50 dark:hover:bg-red-900/20","focus:outline-none focus:ring-2 focus:ring-red-500","disabled:opacity-50 disabled:cursor-not-allowed")),children:"delete"===N?(0,a.jsx)(_.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.Z,{className:"w-4 h-4"}),"Delete"]})}),k&&(0,a.jsxs)("div",{className:"absolute bottom-full mb-2 right-0 w-72 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:["Are you sure you want to delete ",r," task",1!==r?"s":"","? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),(0,a.jsx)("button",{onClick:O,disabled:v,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md disabled:opacity-50",children:"Delete"})]})]})]}),(0,a.jsx)("button",{onClick:c,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Clear selection",children:(0,a.jsx)(W.Z,{className:"w-5 h-5"})})]})]})})}let ec={search:"",status:[],priority:[],assignee_id:"",tag_id:""},ex={sortBy:"created_at",sortOrder:"desc"},eg={low:1,medium:2,high:3,urgent:4},eu={backlog:1,todo:2,in_progress:3,review:4,done:5};function em(){let{tasks:e,loading:r,error:t,updateTask:l,deleteTask:i,selectedTaskIds:n,isTaskSelected:o,isAllSelected:g,isPartialSelected:u,toggleTaskSelection:m,selectAllTasks:y,clearSelection:h,bulkUpdateTasks:b,bulkDeleteTasks:p}=(0,c.Xi)(),{currentProjectId:f,closeModal:k,modal:j}=(0,x.qD)(),[v,w]=(0,s.useState)(ec),[N,C]=(0,s.useState)(ex),[Z,T]=(0,s.useState)(null),[E,W]=(0,s.useState)(null),[M,F]=(0,s.useState)(!1),O=(0,s.useMemo)(()=>{let r=[...e];if(v.search){let e=v.search.toLowerCase();r=r.filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e))}return v.status.length>0&&(r=r.filter(e=>v.status.includes(e.status))),v.priority.length>0&&(r=r.filter(e=>v.priority.includes(e.priority))),r},[e,v]),z=(0,s.useMemo)(()=>{let{sortBy:e,sortOrder:r}=N,t=[...O];return t.sort((t,a)=>{let s=0;switch(e){case"title":s=t.title.localeCompare(a.title);break;case"status":s=eu[t.status]-eu[a.status];break;case"priority":s=eg[t.priority]-eg[a.priority];break;case"due_date":s=t.due_date||a.due_date?t.due_date?a.due_date?new Date(t.due_date).getTime()-new Date(a.due_date).getTime():-1:1:0;break;case"created_at":s=new Date(t.created_at).getTime()-new Date(a.created_at).getTime()}return"asc"===r?s:-s}),t},[O,N]),P=(0,s.useCallback)(e=>{C(r=>({sortBy:e,sortOrder:r.sortBy===e&&"asc"===r.sortOrder?"desc":"asc"}))},[]),A=(0,s.useCallback)(e=>{if(!e.due_date||"done"===e.status)return!1;let r=new Date(e.due_date),t=new Date;return r.setHours(23,59,59,999),r<t},[]),R=(0,s.useCallback)(e=>{T(e)},[]),B=(0,s.useCallback)(e=>{W(e)},[]),K=async e=>{if(Z){F(!0);try{await l(Z.id,e),T(null)}catch(e){console.error("Failed to update task:",e)}finally{F(!1)}}},U=async()=>{if(E){F(!0);try{await i(E.id),W(null)}catch(e){console.error("Failed to delete task:",e)}finally{F(!1)}}},I=(0,s.useCallback)(()=>{g(z.map(e=>e.id))?h():y(z.map(e=>e.id))},[z,g,y,h]),H=(0,s.useCallback)(async e=>{await b(n,{status:e})},[n,b]),q=(0,s.useCallback)(async e=>{await b(n,{priority:e})},[n,b]),Y=(0,s.useCallback)(async e=>{await b(n,{assignee_id:e})},[n,b]),X=(0,s.useCallback)(async()=>{await p(Array.from(n))},[n,p]);if(r)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(_.Z,{className:"w-8 h-8 text-primary-500 animate-spin mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading tasks..."})]})});if(t)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-6 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error loading tasks"}),(0,a.jsx)("p",{className:"text-sm text-red-500 dark:text-red-300",children:t})]})});let G=n.size;return(0,a.jsxs)("div",{className:"h-full flex flex-col pb-16",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:(0,a.jsx)(V,{filters:v,onFilterChange:w,totalTasks:e.length,filteredCount:z.length})}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:0===z.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center p-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:(0,a.jsx)(D.Z,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:0===e.length?"No tasks yet":"No tasks match your filters"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-sm",children:0===e.length?"Create your first task to get started with your project.":"Try adjusting your search or filter criteria to find what you're looking for."}),e.length>0&&(v.search||v.status.length>0||v.priority.length>0)&&(0,a.jsx)("button",{onClick:()=>w(ec),className:"mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",children:"Clear all filters"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[640px]",role:"grid",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"sticky top-0 z-10 px-2 py-3 text-left bg-gray-50 dark:bg-gray-800/80 border-b border-gray-200 dark:border-gray-700 w-10",scope:"col",children:(0,a.jsx)("div",{className:(0,d.W)("w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer transition-colors",g(z.map(e=>e.id))?"bg-blue-600 border-blue-600":u(z.map(e=>e.id))?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-gray-600 hover:border-blue-400"),onClick:I,role:"checkbox","aria-checked":g(z.map(e=>e.id)),"aria-label":"Select all tasks",children:g(z.map(e=>e.id))?(0,a.jsx)(S.Z,{className:"w-3 h-3 text-white","aria-hidden":"true"}):u(z.map(e=>e.id))?(0,a.jsx)(S.Z,{className:"w-3 h-3 text-white","aria-hidden":"true"}):null})}),(0,a.jsx)(ea,{label:"Title",sortKey:"title",currentSort:N.sortBy,sortOrder:N.sortOrder,onSort:P,className:"min-w-[250px]"}),(0,a.jsx)(ea,{label:"Status",sortKey:"status",currentSort:N.sortBy,sortOrder:N.sortOrder,onSort:P,className:"w-32"}),(0,a.jsx)(ea,{label:"Priority",sortKey:"priority",currentSort:N.sortBy,sortOrder:N.sortOrder,onSort:P,className:"w-28"}),(0,a.jsx)("th",{className:"sticky top-0 z-10 px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/80 border-b border-gray-200 dark:border-gray-700",scope:"col",children:"Progress"}),(0,a.jsx)("th",{className:"sticky top-0 z-10 px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/80 border-b border-gray-200 dark:border-gray-700",scope:"col",children:"Assignee"}),(0,a.jsx)("th",{className:"sticky top-0 z-10 px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/80 border-b border-gray-200 dark:border-gray-700",scope:"col",children:"Tags"}),(0,a.jsx)(ea,{label:"Due Date",sortKey:"due_date",currentSort:N.sortBy,sortOrder:N.sortOrder,onSort:P,className:"w-36"}),(0,a.jsx)("th",{className:"sticky top-0 z-10 px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/80 border-b border-gray-200 dark:border-gray-700",scope:"col",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:z.map(e=>(0,a.jsx)($,{task:e,onEdit:R,onDelete:B,isOverdue:A(e),isSelected:o(e.id),onToggleSelection:m},e.id))})]})}),(0,a.jsx)("div",{className:"md:hidden p-4 space-y-3",children:z.map(e=>(0,a.jsx)(J,{task:e,onEdit:R,onDelete:B,isOverdue:A(e)},e.id))})]})}),(0,a.jsx)(L.u_,{isOpen:null!==Z,onClose:()=>T(null),title:"Edit Task",size:"lg",children:Z&&(0,a.jsx)(es.t,{task:Z,projectId:f||void 0,onSubmit:K,onCancel:()=>T(null),isLoading:M})}),(0,a.jsx)(L.sm,{isOpen:null!==E,onClose:()=>W(null),onConfirm:U,title:"Delete Task",message:'Are you sure you want to delete "'.concat(null==E?void 0:E.title,'"? This action cannot be undone.'),confirmText:"Delete",cancelText:"Cancel",variant:"danger",isLoading:M}),G>0&&(0,a.jsx)(eo,{selectedCount:G,onStatusChange:H,onPriorityChange:q,onAssigneeChange:Y,onDelete:X,onClearSelection:h})]})}var ey=t(45727),eh=t(77398),eb=t.n(eh),ep=t(92451),ef=t(94217);let ek=e=>({low:"bg-gray-500 hover:bg-gray-600",medium:"bg-blue-500 hover:bg-blue-600",high:"bg-amber-500 hover:bg-amber-600",urgent:"bg-red-500 hover:bg-red-600"})[e],ej=e=>({low:"bg-gray-200",medium:"bg-blue-200",high:"bg-amber-200",urgent:"bg-red-200"})[e];var ev=function(e){let{task:r,onClick:t}=e;return(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),null==t||t(r)},className:(0,o.m6)((0,d.W)("w-full h-full px-1.5 py-0.5 rounded cursor-pointer","transition-colors duration-150",ek(r.priority))),title:"".concat(r.title,"\nPriority: ").concat(u.Fr[r.priority].label),children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0",children:[(0,a.jsx)("span",{className:(0,o.m6)((0,d.W)("flex-shrink-0 w-1.5 h-1.5 rounded-full",ej(r.priority)))}),(0,a.jsx)("span",{className:"text-xs font-medium text-white truncate",children:r.title})]})})};t(87676),eb().locale("en");let ew=(0,ey.Zt)(eb()),eN={low:"#6b7280",medium:"#3b82f6",high:"#f59e0b",urgent:"#ef4444"};function eC(){let{tasks:e,createTask:r,updateTask:t}=(0,c.Xi)(),{currentProject:l}=(0,ef.Z0)(),[i,n]=(0,s.useState)(new Date),[x,g]=(0,s.useState)(ey.kO.MONTH),[m,y]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),[k,j]=(0,s.useState)(!1),v=(0,s.useMemo)(()=>e.filter(e=>e.due_date).map(e=>({id:e.id,title:e.title,start:new Date(e.due_date),end:new Date(e.due_date),resource:e})),[e]),w=(0,s.useCallback)(()=>{n(new Date)},[]),N=(0,s.useCallback)(()=>{n(e=>{let r=new Date(e);return x===ey.kO.MONTH?r.setMonth(r.getMonth()-1):x===ey.kO.WEEK?r.setDate(r.getDate()-7):r.setDate(r.getDate()-1),r})},[x]),C=(0,s.useCallback)(()=>{n(e=>{let r=new Date(e);return x===ey.kO.MONTH?r.setMonth(r.getMonth()+1):x===ey.kO.WEEK?r.setDate(r.getDate()+7):r.setDate(r.getDate()+1),r})},[x]),_=(0,s.useCallback)(e=>{b(e.resource),f(null),y(!0)},[]),D=(0,s.useCallback)(e=>{let{start:r}=e;b(null),f(r),y(!0)},[]),S=(0,s.useCallback)(()=>{y(!1),b(null),f(null)},[]),Z=(0,s.useCallback)(async e=>{j(!0);try{h?await t(h.id,e):await r(e),S()}catch(e){console.error("Failed to save task:",e)}finally{j(!1)}},[h,r,t,S]),T=(0,s.useCallback)(e=>{let{event:r}=e;return(0,a.jsx)(ev,{task:r.resource,onClick:()=>_(r)})},[_]),E=(0,s.useCallback)(e=>({style:{backgroundColor:eN[e.resource.priority],borderRadius:"4px",border:"none",color:"white",fontSize:"12px",padding:"2px 4px"}}),[]);return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:N,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300","aria-label":"Previous",children:(0,a.jsx)(ep.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:C,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300","aria-label":"Next",children:(0,a.jsx)(Q.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:w,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"Today"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 ml-2",children:(()=>{let e={month:"long",year:"numeric"};return x===ey.kO.WEEK&&(e.day="numeric"),i.toLocaleDateString("en-US",e)})()})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("div",{className:"flex rounded-md shadow-sm",children:[{key:ey.kO.MONTH,label:"Month"},{key:ey.kO.WEEK,label:"Week"}].map(e=>(0,a.jsx)("button",{onClick:()=>g(e.key),className:(0,o.m6)((0,d.W)("px-3 py-1.5 text-sm font-medium","border border-gray-300 dark:border-gray-600",x===e.key?"bg-primary-500 text-white border-primary-500":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700")),children:e.label},e.key))})})]}),(0,a.jsx)("div",{className:"flex-1 min-h-[500px] bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,a.jsx)(ey.f,{localizer:ew,events:v,startAccessor:"start",endAccessor:"end",view:x,onView:e=>g(e),date:i,onNavigate:n,onSelectEvent:_,onSelectSlot:D,selectable:!0,components:{event:T},eventPropGetter:E,views:[ey.kO.MONTH,ey.kO.WEEK],className:"calendar-dark",popup:!0,tooltipAccessor:e=>"".concat(e.title,"\nPriority: ").concat(u.Fr[e.resource.priority].label)})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Priority:"}),Object.entries(u.Fr).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label})]},r)})]}),(0,a.jsx)(L.u_,{isOpen:m,onClose:S,title:h?"Edit Task":"Create Task",size:"lg",children:(0,a.jsx)(es.t,{task:h,project:l,projectId:null==l?void 0:l.id,onSubmit:Z,onCancel:S,isLoading:k})})]})}var e_=t(71344),eD=t(15),eS=t(31559),eZ=t(13657),eT=t(92926),eE=t(55463),eW=t(45595),eM=t(71205),eF=t(25721);let eO=e=>({backlog:"bg-gray-400",todo:"bg-blue-500",in_progress:"bg-amber-500",review:"bg-purple-500",done:"bg-green-500"})[e],ez=e=>({backlog:"border-gray-500",todo:"border-blue-600",in_progress:"border-amber-600",review:"border-purple-600",done:"border-green-600"})[e];var eP=function(e){let{task:r,left:t,width:l,onClick:i}=e,[n,c]=(0,s.useState)(!1),x=(()=>{if("in_progress"!==r.status||!r.start_date||!r.due_date)return null;let e=new Date(r.start_date),t=new Date(r.due_date),a=new Date;if(a<=e)return 0;if(a>=t)return 100;let s=t.getTime()-e.getTime();return Math.min(100,Math.max(0,(a.getTime()-e.getTime())/s*100))})();return(0,a.jsxs)("div",{className:"relative my-1",style:{position:"absolute",left:"".concat(t,"%"),width:"".concat(Math.max(l,2),"%")},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),null==i||i(r)},className:(0,o.m6)((0,d.W)("w-full h-8 rounded-md border-l-2 transition-all duration-150","cursor-pointer",eO(r.status),ez(r.status),n&&"ring-2 ring-offset-1 ring-gray-400 scale-y-110")),"aria-label":"Task: ".concat(r.title),children:null!==x&&(0,a.jsx)("div",{className:"h-full bg-white/30 rounded-r-md",style:{width:"".concat(100-x,"%"),marginLeft:"auto"}})}),n&&(0,a.jsxs)("div",{className:(0,o.m6)((0,d.W)("absolute z-50 bottom-full mb-2 left-0","bg-white dark:bg-gray-900 rounded-lg shadow-lg","border border-gray-200 dark:border-gray-700","p-3 min-w-[200px] max-w-[300px]","text-sm")),children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:r.title}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:u.RS[r.status].color}}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:u.RS[r.status].label})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:u.Fr[r.priority].color}}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[u.Fr[r.priority].label," priority"]})]}),r.start_date&&r.due_date&&(0,a.jsxs)("div",{className:"text-gray-500 dark:text-gray-500 text-xs mt-2",children:[new Date(r.start_date).toLocaleDateString()," -"," ",new Date(r.due_date).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("absolute top-full left-4","border-8 border-transparent","border-t-white dark:border-t-gray-900"))})]})]})};function eL(){let{tasks:e,createTask:r,updateTask:t}=(0,c.Xi)(),{currentProject:l}=(0,ef.Z0)(),[i,n]=(0,s.useState)("week"),[x,g]=(0,s.useState)(new Date),[m,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)(null),[f,k]=(0,s.useState)(!1),j=(0,s.useMemo)(()=>{let e,r,t;switch(i){case"day":default:e=(0,e_.Z)(x),r=(0,eD.Z)(x),t=7;break;case"week":e=(0,eS.Z)(x),r=(0,eZ.Z)(x),t=(0,eT.Z)(r,e)+1;break;case"month":e=(0,eS.Z)((0,eE.Z)(x,-1)),r=(0,eZ.Z)((0,eE.Z)(x,1)),t=(0,eT.Z)(r,e)+1}let a=(0,eW.Z)({start:e,end:r});return{start:e,end:r,days:a,daysToShow:t}},[i,x]),v=(0,s.useMemo)(()=>{let r=e.filter(e=>e.start_date&&e.due_date),{start:t,end:a,daysToShow:s}=j,l=(0,eM.Z)(a,t)||1,i=[],n=[];return r.forEach(e=>{let r=new Date(e.start_date),s=new Date(e.due_date);if(s<t||r>a)return;let d=Math.max(r.getTime(),t.getTime()),o=Math.min(s.getTime(),a.getTime()),c=(0,eM.Z)(new Date(d),t)/l*100,x=(0,eM.Z)(new Date(o),new Date(d))/l*100,g=0;for(let e=0;e<i.length;e++){if(new Date(d)>=i[e].end){g=e,i[e].end=new Date(o);break}g=e+1}g>=i.length&&i.push({end:new Date(o)}),n.push({task:e,startDate:r,endDate:s,left:Math.max(0,c),width:Math.max(1,x),row:g})}),{tasks:n,rowsNeeded:i.length}},[e,j]),w=(0,s.useCallback)(e=>{g(r=>{switch(i){case"day":return(0,eF.Z)(r,"prev"===e?-7:7);case"week":return(0,eE.Z)(r,"prev"===e?-1:1);case"month":return(0,eE.Z)(r,"prev"===e?-2:2);default:return r}})},[i]),N=(0,s.useCallback)(e=>{p(e),h(!0)},[]),C=(0,s.useCallback)(()=>{h(!1),p(null)},[]),_=(0,s.useCallback)(async e=>{k(!0);try{b?await t(b.id,e):await r(e),C()}catch(e){console.error("Failed to save task:",e)}finally{k(!1)}},[b,r,t,C]),D=e=>{let r=new Date;return e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear()},S=e=>{let r=e.getDay();return 0===r||6===r},Z=(()=>{let e=new Date,{start:r,end:t}=j;if(e<r||e>t)return null;let a=(0,eM.Z)(t,r)||1;return(0,eM.Z)(e,r)/a*100})(),T=(()=>{switch(i){case"day":return 100;case"week":default:return 40;case"month":return 20}})();return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>w("prev"),className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300","aria-label":"Previous",children:(0,a.jsx)(ep.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>w("next"),className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300","aria-label":"Next",children:(0,a.jsx)(Q.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>g(new Date),className:"px-3 py-1.5 text-sm font-medium rounded-md bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"Today"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 ml-2",children:(0,y.Z)(j.start,"MMMM yyyy")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>n("day"),className:(0,o.m6)((0,d.W)("px-3 py-1.5 text-sm font-medium rounded-md border","day"===i?"bg-primary-500 text-white border-primary-500":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700")),children:"Day"}),(0,a.jsx)("button",{onClick:()=>n("week"),className:(0,o.m6)((0,d.W)("px-3 py-1.5 text-sm font-medium rounded-md border","week"===i?"bg-primary-500 text-white border-primary-500":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700")),children:"Week"}),(0,a.jsx)("button",{onClick:()=>n("month"),className:(0,o.m6)((0,d.W)("px-3 py-1.5 text-sm font-medium rounded-md border","month"===i?"bg-primary-500 text-white border-primary-500":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700")),children:"Month"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex min-w-full",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 w-48 md:w-64 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"h-14 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 px-3 py-2 flex items-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Tasks (",v.tasks.length,")"]})}),(0,a.jsx)("div",{className:"relative",style:{height:40*v.rowsNeeded+20},children:v.tasks.map((e,r)=>(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("absolute right-0 h-8 flex items-center justify-end px-3","overflow-hidden")),style:{top:40*e.row+10,width:"100%"},children:(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:e.task.title})},e.task.id))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,a.jsxs)("div",{className:"relative",style:{minWidth:j.days.length*T},children:[(0,a.jsx)("div",{className:"flex h-14 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:j.days.map((e,r)=>(0,a.jsxs)("div",{className:(0,o.m6)((0,d.W)("flex-shrink-0 border-r border-gray-200 dark:border-gray-700 last:border-r-0","flex flex-col items-center justify-center",D(e)&&"bg-primary-50 dark:bg-primary-900/20",S(e)&&"bg-gray-100 dark:bg-gray-800")),style:{width:T},children:[(0,a.jsx)("span",{className:(0,o.m6)((0,d.W)("text-xs",D(e)?"text-primary-600 dark:text-primary-400 font-semibold":"text-gray-500 dark:text-gray-400")),children:(0,y.Z)(e,"EEE")}),(0,a.jsx)("span",{className:(0,o.m6)((0,d.W)("text-sm font-medium",D(e)?"text-primary-600 dark:text-primary-400":"text-gray-900 dark:text-gray-100")),children:(0,y.Z)(e,"d")})]},r))}),(0,a.jsxs)("div",{className:"relative",style:{height:40*v.rowsNeeded+20},children:[(0,a.jsx)("div",{className:"absolute inset-0 flex pointer-events-none",children:j.days.map((e,r)=>(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("flex-shrink-0 border-r border-gray-200 dark:border-gray-700 last:border-r-0",S(e)&&"bg-gray-50 dark:bg-gray-900/50")),style:{width:T}},r))}),null!==Z&&(0,a.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:"".concat(Z,"%")},children:(0,a.jsx)("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-500 text-white rounded",children:"Today"})})}),v.tasks.map(e=>(0,a.jsx)(eP,{task:e.task,left:e.left,width:e.width,onClick:N},e.task.id))]})]})})]}),0===v.tasks.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No tasks with date ranges to display"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Add start and due dates to your tasks to see them on the timeline"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status:"}),Object.entries(u.RS).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded",style:{backgroundColor:t.color}}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.label})]},r)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,a.jsx)("div",{className:"w-0.5 h-4 bg-red-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today"})]})]}),(0,a.jsx)(L.u_,{isOpen:m,onClose:C,title:"Edit Task",size:"lg",children:(0,a.jsx)(es.t,{task:b,project:l,projectId:null==l?void 0:l.id,onSubmit:_,onCancel:C,isLoading:f})})]})}var eA=t(13422),eR=t(6984),eB=t(30702),eK=t(9343),eU=t(66901),eI=t(91723),eV=t(63639),eH=t(42488),eq=t(43044),eY=t(47625),eX=t(75169),eG=t(3574),e$=t(20407),eQ=t(8147),eJ=t(22190),e0=t(77031),e1=t(56940),e2=t(97059),e5=t(62994),e4=t(31699),e3=t(5481),e6=t(23263);let e7={default:"bg-white dark:bg-gray-800",bordered:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",elevated:"bg-white dark:bg-gray-800 shadow-lg"},e8={none:"",sm:"p-3",md:"p-4",lg:"p-6"},e9=(0,s.forwardRef)((e,r)=>{let{className:t,children:s,variant:l="bordered",padding:i="md",hoverable:n=!1,clickable:c=!1,...x}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.m6)((0,d.W)("rounded-lg",e7[l],e8[i],n&&"transition-shadow duration-200 hover:shadow-md",c&&"cursor-pointer transition-all duration-200 hover:shadow-md active:scale-[0.99]",t)),...x,children:s})});e9.displayName="Card",(0,s.forwardRef)((e,r)=>{let{className:t,children:s,actions:l,...i}=e;return(0,a.jsxs)("div",{ref:r,className:(0,o.m6)((0,d.W)("flex items-center justify-between","border-b border-gray-200 dark:border-gray-700","pb-3 mb-3",t)),...i,children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s}),l&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:l})]})}).displayName="CardHeader",(0,s.forwardRef)((e,r)=>{let{className:t,children:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.m6)((0,d.W)(t)),...l,children:s})}).displayName="CardBody",(0,s.forwardRef)((e,r)=>{let{className:t,children:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.m6)((0,d.W)("flex items-center justify-end gap-2","border-t border-gray-200 dark:border-gray-700","pt-3 mt-3",t)),...l,children:s})}).displayName="CardFooter";var re=t(70525),rr=t(3085);let rt={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",icon:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",text:"text-blue-600 dark:text-blue-400"},green:{bg:"bg-green-50 dark:bg-green-900/20",icon:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",text:"text-green-600 dark:text-green-400"},amber:{bg:"bg-amber-50 dark:bg-amber-900/20",icon:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",text:"text-amber-600 dark:text-amber-400"},red:{bg:"bg-red-50 dark:bg-red-900/20",icon:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",text:"text-red-600 dark:text-red-400"},purple:{bg:"bg-purple-50 dark:bg-purple-900/20",icon:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",text:"text-purple-600 dark:text-purple-400"},gray:{bg:"bg-gray-50 dark:bg-gray-900/20",icon:"bg-gray-100 dark:bg-gray-900/30 text-gray-600 dark:text-gray-400",text:"text-gray-600 dark:text-gray-400"}};var ra=function(e){let{title:r,value:t,icon:s,color:l="blue",trend:i,subtitle:n}=e,c=rt[l];return(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("rounded-lg p-4 border border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800","transition-shadow duration-200 hover:shadow-md")),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100",children:t}),n&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:n}),i&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[i.isPositive?(0,a.jsx)(re.Z,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(rr.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{className:(0,o.m6)((0,d.W)("text-xs font-medium",i.isPositive?"text-green-500":"text-red-500")),children:[i.isPositive?"+":"",i.value,"%"]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"vs last week"})]})]}),(0,a.jsx)("div",{className:(0,o.m6)((0,d.W)("p-2 rounded-lg",c.icon)),children:(0,a.jsx)(s,{className:"w-5 h-5"})})]})})},rs=t(83422),rl=t(72526),ri=t(2157),rn=t(65302);let rd=e=>{let r=new Date;if(r.setHours(0,0,0,0),(0,rs.Z)(e)&&!(0,rl.Z)(e))return{label:"Overdue",color:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",icon:H.Z};if((0,rl.Z)(e))return{label:"Due today",color:"text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",icon:H.Z};if((0,ri.Z)(e))return{label:"Due tomorrow",color:"text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",icon:b.Z};let t=(0,eT.Z)(e,r);return t<=3?{label:"".concat(t," days left"),color:"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",icon:b.Z}:{label:"".concat(t," days left"),color:"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700",icon:b.Z}};var ro=function(e){let{tasks:r,onTaskClick:t,maxItems:l=5}=e,i=s.useMemo(()=>(new Date().setHours(0,0,0,0),r.filter(e=>e.due_date&&"done"!==e.status).sort((e,r)=>e.due_date?r.due_date?new Date(e.due_date).getTime()-new Date(r.due_date).getTime():-1:1).slice(0,l)),[r,l]);return 0===i.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(rn.Z,{className:"w-12 h-12 text-green-500 mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"No upcoming deadlines"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"All tasks are completed or have no due dates"})]}):(0,a.jsx)("div",{className:"space-y-3",children:i.map(e=>{let r=new Date(e.due_date),s=rd(r),l=s.icon;return(0,a.jsx)("button",{onClick:()=>null==t?void 0:t(e),className:(0,o.m6)((0,d.W)("w-full text-left p-3 rounded-lg border","transition-all duration-150","hover:shadow-md hover:scale-[1.01]","focus:outline-none focus:ring-2 focus:ring-primary-500",s.color)),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:u.Fr[e.priority].color}}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.Fr[e.priority].label}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0 ml-2",style:{backgroundColor:u.RS[e.status].color}}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.RS[e.status].label})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:s.label})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:(0,y.Z)(r,"MMM d, yyyy")})]})]})},e.id)})})};function rc(){let{tasks:e,createTask:r,updateTask:t}=(0,c.Xi)(),{currentProject:l}=(0,ef.Z0)(),[i,n]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),b=(0,s.useMemo)(()=>{let r=new Date;r.setHours(0,0,0,0);let t=e.length;return{totalTasks:t,completedTasks:e.filter(e=>"done"===e.status).length,inProgressTasks:e.filter(e=>"in_progress"===e.status).length,overdueTasks:e.filter(e=>e.due_date&&new Date(e.due_date)<r&&"done"!==e.status).length}},[e]),p=(0,s.useMemo)(()=>{let r={backlog:0,todo:0,in_progress:0,review:0,done:0};return e.forEach(e=>{r[e.status]++}),Object.entries(r).map(e=>{let[r,t]=e;return{name:u.RS[r].label,value:t,color:u.RS[r].color,status:r}})},[e]),f=(0,s.useMemo)(()=>{let r={low:0,medium:0,high:0,urgent:0};return e.forEach(e=>{r[e.priority]++}),Object.entries(r).map(e=>{let[r,t]=e;return{name:u.Fr[r].label,value:t,color:u.Fr[r].color,priority:r}})},[e]),k=(0,s.useMemo)(()=>{let r=new Date,t=(0,eA.Z)(r,7);return(0,eR.Z)({start:t,end:r}).map(r=>{let t=(0,eD.Z)(r);return{week:(0,y.Z)(r,"MMM d"),created:e.filter(e=>{let a=new Date(e.created_at);return(0,eB.Z)(a,{start:r,end:t})}).length,completed:e.filter(e=>{if("done"!==e.status)return!1;let a=new Date(e.updated_at);return(0,eB.Z)(a,{start:r,end:t})}).length}})},[e]),j=(0,s.useMemo)(()=>[...e].sort((e,r)=>new Date(r.updated_at).getTime()-new Date(e.updated_at).getTime()).slice(0,5),[e]),v=(0,s.useCallback)(e=>{g(e),n(!0)},[]),w=(0,s.useCallback)(()=>{n(!1),g(null)},[]),N=(0,s.useCallback)(async e=>{h(!0);try{x?await t(x.id,e):await r(e),w()}catch(e){console.error("Failed to save task:",e)}finally{h(!1)}},[x,r,t,w]),C=e=>{let{active:r,payload:t,label:s}=e;return r&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s}),t.map((e,r)=>(0,a.jsxs)("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",e.value]},r))]}):null};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(ra,{title:"Total Tasks",value:b.totalTasks,icon:eK.Z,color:"blue"}),(0,a.jsx)(ra,{title:"Completed",value:b.completedTasks,icon:eU.Z,color:"green",subtitle:"".concat(Math.round(b.completedTasks/(b.totalTasks||1)*100),"% complete")}),(0,a.jsx)(ra,{title:"In Progress",value:b.inProgressTasks,icon:eI.Z,color:"amber"}),(0,a.jsx)(ra,{title:"Overdue",value:b.overdueTasks,icon:eV.Z,color:"red",subtitle:b.overdueTasks>0?"Needs attention":"All on track"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(e9,{variant:"bordered",padding:"lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Status Distribution"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(eY.h,{width:"100%",height:"100%",children:(0,a.jsxs)(eX.u,{children:[(0,a.jsx)(eG.b,{data:p,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:2,dataKey:"value",label:e=>{let{name:r,percent:t}=e;return"".concat(r," ").concat((100*t).toFixed(0),"%")},labelLine:!1,children:p.map((e,r)=>(0,a.jsx)(e$.b,{fill:e.color},"cell-".concat(r)))}),(0,a.jsx)(eQ.u,{content:(0,a.jsx)(C,{})}),(0,a.jsx)(eJ.D,{verticalAlign:"bottom",height:36,formatter:e=>(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})})]})})})]}),(0,a.jsxs)(e9,{variant:"bordered",padding:"lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Priority Distribution"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(eY.h,{width:"100%",height:"100%",children:(0,a.jsxs)(e0.v,{data:f,layout:"vertical",children:[(0,a.jsx)(e1.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),(0,a.jsx)(e2.K,{type:"number",tick:{fill:"#9CA3AF",fontSize:12}}),(0,a.jsx)(e5.B,{type:"category",dataKey:"name",tick:{fill:"#9CA3AF",fontSize:12},width:60}),(0,a.jsx)(eQ.u,{content:(0,a.jsx)(C,{})}),(0,a.jsx)(e4.$,{dataKey:"value",radius:[0,4,4,0],children:f.map((e,r)=>(0,a.jsx)(e$.b,{fill:e.color},"cell-".concat(r)))})]})})})]})]}),(0,a.jsxs)(e9,{variant:"bordered",padding:"lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Tasks Timeline (Last 8 Weeks)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(eY.h,{width:"100%",height:"100%",children:(0,a.jsxs)(e3.T,{data:k,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"colorCompleted",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),(0,a.jsx)(e1.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),(0,a.jsx)(e2.K,{dataKey:"week",tick:{fill:"#9CA3AF",fontSize:12}}),(0,a.jsx)(e5.B,{tick:{fill:"#9CA3AF",fontSize:12}}),(0,a.jsx)(eQ.u,{content:(0,a.jsx)(C,{})}),(0,a.jsx)(eJ.D,{verticalAlign:"top",height:36,formatter:e=>(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"created"===e?"Tasks Created":"Tasks Completed"})}),(0,a.jsx)(e6.u,{type:"monotone",dataKey:"created",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorCreated)"}),(0,a.jsx)(e6.u,{type:"monotone",dataKey:"completed",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorCompleted)"})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(e9,{variant:"bordered",padding:"lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upcoming Deadlines"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Next 7 days"})]}),(0,a.jsx)(ro,{tasks:e,onTaskClick:v,maxItems:5})]}),(0,a.jsxs)(e9,{variant:"bordered",padding:"lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Recent Activity"}),(0,a.jsx)(eH.Z,{className:"w-5 h-5 text-gray-400"})]}),0===j.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(eq.Z,{className:"w-12 h-12 text-gray-400 mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No recent activity"})]}):(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:(0,o.m6)((0,d.W)("w-full text-left p-3 rounded-lg","bg-gray-50 dark:bg-gray-900/50","hover:bg-gray-100 dark:hover:bg-gray-900","transition-colors duration-150","focus:outline-none focus:ring-2 focus:ring-primary-500")),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:u.RS[e.status].color}}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.RS[e.status].label})]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0",children:(0,y.Z)(new Date(e.updated_at),"MMM d, h:mm a")})]})},e.id))})]})]}),(0,a.jsx)(L.u_,{isOpen:i,onClose:w,title:"Edit Task",size:"lg",children:(0,a.jsx)(es.t,{task:x,project:l,projectId:null==l?void 0:l.id,onSubmit:N,onCancel:w,isLoading:m})})]})}let rx=["kanban","list","calendar","timeline","dashboard"];function rg(){let e=(0,l.useParams)(),r=(0,l.useRouter)(),{setCurrentView:t,setCurrentProjectId:n}=(0,x.qD)(),{projects:d,loading:o,currentProject:c,setCurrentProjectById:g}=(0,ef.Z0)(),u=(null==e?void 0:e.projectId)?parseInt(e.projectId,10):null,m=null==e?void 0:e.view;return((0,s.useEffect)(()=>{u&&!isNaN(u)&&(n(u),g(u))},[u,n,g]),(0,s.useEffect)(()=>{m&&rx.includes(m)&&t(m)},[m,t]),(0,s.useEffect)(()=>{o||!(d.length>0)||!u||isNaN(u)||d.find(e=>e.id===u)||r.replace("/projects/".concat(d[0].id,"/").concat(m||"kanban"))},[o,d,u,m,r]),o)?(0,a.jsx)(i.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):0===d.length?(0,a.jsx)(i.A,{children:(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center",children:(0,a.jsxs)("div",{className:"max-w-md p-8 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to TaskTrack!"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started by creating your first project."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:'Click the "+" button in the sidebar to create a project.'})]})})}):(0,a.jsx)(i.A,{children:(()=>{switch(m){case"kanban":default:return(0,a.jsx)(C,{});case"list":return(0,a.jsx)(em,{});case"calendar":return(0,a.jsx)(eC,{});case"timeline":return(0,a.jsx)(eL,{});case"dashboard":return(0,a.jsx)(rc,{})}})()})}},37710:function(e,r,t){"use strict";t.d(r,{F9:function(){return d},M8:function(){return n}});var a=t(57437),s=t(2265),l=t(28223);let i=(0,s.createContext)(void 0);function n(e){let{children:r,projectId:t,viewType:n,onApplyView:d}=e,[o,c]=(0,s.useState)([]),[x,g]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),y=(0,s.useMemo)(()=>o.filter(e=>{let r=!t||!e.project_id||e.project_id===t,a=!n||e.view_type===n;return r&&a&&e.is_default})[0]||null,[o,t,n]),h=(0,s.useCallback)(async(e,r)=>{g(!0),m(null);try{let t=await l.SP(e,r);c(t)}catch(e){m(e instanceof Error?e.message:"Failed to fetch saved views")}finally{g(!1)}},[]),b=(0,s.useCallback)(async e=>{g(!0),m(null);try{let r=await l.rQ(e);return c(e=>[...e,r]),r}catch(r){let e=r instanceof Error?r.message:"Failed to create saved view";throw m(e),Error(e)}finally{g(!1)}},[]),p=(0,s.useCallback)(async(e,r)=>{g(!0),m(null);try{let t=await l.FR(e,r);return c(r=>r.map(r=>r.id===e?t:r)),t}catch(r){let e=r instanceof Error?r.message:"Failed to update saved view";throw m(e),Error(e)}finally{g(!1)}},[]),f=(0,s.useCallback)(async e=>{g(!0),m(null);try{await l.ZA(e),c(r=>r.filter(r=>r.id!==e))}catch(r){let e=r instanceof Error?r.message:"Failed to delete saved view";throw m(e),Error(e)}finally{g(!1)}},[]),k=(0,s.useCallback)(async e=>{g(!0),m(null);try{let r=await l.jn(e);return c(r=>r.map(r=>({...r,is_default:r.id===e}))),r}catch(r){let e=r instanceof Error?r.message:"Failed to set default view";throw m(e),Error(e)}finally{g(!1)}},[]),j=(0,s.useCallback)(e=>o.find(r=>r.id===e),[o]),v=(0,s.useCallback)(e=>o.filter(r=>{let a=!t||!r.project_id||r.project_id===t;return r.view_type===e&&a}),[o,t]),w=(0,s.useCallback)(e=>{let r={filters:e.filters,sortBy:e.sort_by,sortOrder:e.sort_order};return d&&d(r),r},[d]),N=(0,s.useCallback)(()=>{m(null)},[]);return(0,s.useEffect)(()=>{h(t||void 0,n)},[h,t,n]),(0,a.jsx)(i.Provider,{value:{savedViews:o,defaultView:y,loading:x,error:u,fetchSavedViews:h,createSavedView:b,updateSavedView:p,deleteSavedView:f,setDefaultView:k,getSavedViewById:j,getViewsForType:v,applySavedView:w,clearError:N},children:r})}function d(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useSavedViews must be used within a SavedViewProvider");return e}}},function(e){e.O(0,[834,856,990,2,212,588,217,909,748,971,117,744],function(){return e(e.s=28610)}),_N_E=e.O()}]);